{
  "extends": [
    "config:base"
  ],
  "rebaseWhen": "conflicted",
  "ignoreUnstable": false,
  "packageRules": [
    {
      "matchPackagePatterns": [".*"],
      "allowedVersions": "/^v?[0-9]+(\\.[0-9]+){0,2}$/"
    },
    // Enable auto-merge for minor/patch updates.
    {
      "matchPackagePatterns": [".*"],
      "matchUpdateTypes": ["minor", "patch"],
      "matchCurrentVersion": "!/^0/",
      "automerge": true,
    },
    {
      // See https://github.com/vanniktech/gradle-maven-publish-plugin/issues/1131.
      "groupName": "Retrofit and OkHttp",
      "enabled": false,
      "matchPackageNames": [
        "/com.squareup.retrofit2:*/",
        "/com.squareup.okhttp3:*/",
      ]
    },
    {
      "matchFileNames": ["**/alpha.versions.toml"],
      "allowedVersions": "!/(-SNAPSHOT)/"
    },
    {
      "matchFileNames": ["**/beta.versions.toml"],
      "allowedVersions": "!/(-alpha|-Alpha|-ALPHA|-milestone|-m|-SNAPSHOT)/"
    },
    {
      "matchFileNames": ["**/rc.versions.toml"],
      "allowedVersions": "!/(-alpha|-Alpha|-ALPHA|-beta|-Beta|-BETA|-milestone|-m|-SNAPSHOT)/"
    }
  ],
  ignorePresets: [
    // Ensure we get the latest version and are not pinned to old versions.
    'workarounds:javaLTSVersions',
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["\\.versions.toml$"],
      "matchStrings": ["(^|\n)(?<depName>gradle) *= *\"(?<currentValue>.*)\""],
      "depNameTemplate": "gradle",
      "datasourceTemplate": "gradle-version"
    },
    // Update .java-version file with the latest JDK version.
    {
      customType: 'regex',
      managerFilePatterns: [
        '/\\.java-version$/',
      ],
      matchStrings: [
        '(?<currentValue>.*)\\n',
      ],
      datasourceTemplate: 'java-version',
      depNameTemplate: 'java',
      // Only write the major version.
      extractVersionTemplate: '^(?<version>\\d+)',
    }
  ]
}
